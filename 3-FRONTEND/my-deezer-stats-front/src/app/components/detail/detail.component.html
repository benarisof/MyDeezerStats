<div class="detail-container" [class.loading]="loading">
  
  <div class="loading-overlay" *ngIf="loading">
    <div class="spinner"></div>
  </div>

  <div *ngIf="item && !loading" class="animate-in">
    <button class="back-button" (click)="goToDashboard()">
      <i class="fas fa-chevron-left"></i>
      <span>Retour au dashboard</span>
    </button>

    <header class="hero-section">
      <div class="cover-wrapper">
        <img [src]="item.coverUrl || 'assets/default-cover.jpg'" 
             [alt]="item.type === 'album' ? item.title : item.artist"
             class="hero-cover">
      </div>
      
      <div class="hero-content">
        <span class="badge">{{ item.type === 'album' ? 'ALBUM' : 'ARTISTE' }}</span>
        <h1>{{ item.type === 'album' ? item.title : item.artist }}</h1>
        
        <div class="hero-meta">
          <p class="main-artist" *ngIf="item.type === 'album'">{{ item.artist }}</p>
          <div class="stats-row">
            <span *ngIf="item.playCount">
              <i class="fas fa-play"></i> {{ item.playCount | number }} écoutes
            </span>
            <span *ngIf="item.type === 'artist' && item.nbFans">
              <i class="fas fa-heart"></i> {{ item.nbFans | number }} fans
            </span>
            <span *ngIf="item.type === 'album' && item.releaseDate">
              <i class="fas fa-calendar-alt"></i> {{ item.releaseDate | date:'yyyy' }}
            </span>
            <span>
              <i class="fas fa-hourglass-half"></i> {{ item.totalListening | duration }} cumulés
            </span>
          </div>
        </div>
      </div>
    </header>

    <section class="tracks-section">
      <div class="section-header">
        <h2><i class="fas fa-list-ul"></i> Titres populaires</h2>
      </div>

      <div class="tracks-table">
        <div class="table-header">
          <div class="col-rank">#</div>
          <div class="col-title">TITRE</div>
          <div class="col-meta">{{ item.type === 'album' ? 'ARTISTE' : 'ALBUM' }}</div>
          <div class="col-stats">ÉCOUTES</div>
          <div class="col-duration"><i class="far fa-clock"></i></div>
        </div>

        <div class="track-row" *ngFor="let track of item.trackInfos; let i = index">
          <div class="col-rank">{{ i + 1 }}</div>
          <div class="col-title">
            <span class="track-name">{{ track.track }}</span>
          </div>
          <div class="col-meta">
             {{ item.type === 'album' ? track.artist : track.album }}
          </div>
          <div class="col-stats">
            <span class="count-badge">{{ track.count }}</span>
          </div>
          <div class="col-duration">{{ track.duration | duration }}</div>
        </div>
      </div>
    </section>
  </div>
</div>