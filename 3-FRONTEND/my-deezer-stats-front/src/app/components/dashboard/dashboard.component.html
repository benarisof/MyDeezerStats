<div class="dashboard-container" [class.loading]="isLoading">

  <div class="loading-overlay" *ngIf="isLoading">
    <div class="spinner"></div>
  </div>

  <section class="section">
    <div class="section-header">
      <h2>
        <span class="clickable" (click)="goToTop('album')">
          <i class="fa fa-compact-disc"></i> Top albums
        </span>
      </h2>
      <div class="scroll-controls">
        <button class="scroll-btn" (click)="scroll('albumList', -1)" title="Précédent"><i class="fas fa-chevron-left"></i></button>
        <button class="scroll-btn" (click)="scroll('albumList', 1)" title="Suivant"><i class="fas fa-chevron-right"></i></button>
      </div>
    </div>
    
    <div class="card-list" id="albumList">
      <div *ngFor="let album of topAlbums; let i = index" class="card-wrapper">
        <div class="card" (click)="navigateToDetail('album', album)"
          [title]="album.title + (album.artist ? ' - ' + album.artist : '')">
          <div class="rank">{{ i + 1 }}</div>
          <img [src]="album.coverUrl || 'assets/default-cover.jpg'" alt="{{ album.title }}" class="card-image" />
          <div class="card-content">
            <h3>{{ album.title }}</h3>
            <p>{{ album.artist }}</p>
            <p>{{ album.count }} écoutes</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="section-header">
      <h2>
        <span class="clickable" (click)="goToTop('artist')">
          <i class="fas fa-user"></i> Top artistes
        </span>
      </h2>
      <div class="scroll-controls">
        <button class="scroll-btn" (click)="scroll('artistList', -1)"><i class="fas fa-chevron-left"></i></button>
        <button class="scroll-btn" (click)="scroll('artistList', 1)"><i class="fas fa-chevron-right"></i></button>
      </div>
    </div>

    <div class="card-list" id="artistList">
      <div *ngFor="let artist of topArtists; let i = index" class="card-wrapper">
        <div class="card" (click)="navigateToDetail('artist', artist)"
          [title]="artist.artist">
          <div class="rank">{{ i + 1 }}</div>
          <img [src]="artist.coverUrl || 'assets/default-cover.jpg'" alt="{{ artist.artist }}" class="card-image" />
          <div class="card-content">
            <h3>{{ artist.artist }}</h3>
            <p>{{artist.count}} écoutes</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="section-header">
      <h2>
        <span class="clickable" (click)="goToTop('track')">
          <i class="fas fa-music"></i> Top morceaux
        </span>
      </h2>
      <div class="scroll-controls">
        <button class="scroll-btn" (click)="scroll('trackList', -1)"><i class="fas fa-chevron-left"></i></button>
        <button class="scroll-btn" (click)="scroll('trackList', 1)"><i class="fas fa-chevron-right"></i></button>
      </div>
    </div>

    <div class="card-list" id="trackList">
      <div *ngFor="let song of topTracks; let i = index" class="card-wrapper">
        <div class="card"
          [title]="song.track + ' - ' + song.artist + (song.album ? ' (' + song.album + ')' : '')">
          <div class="rank">{{ i + 1 }}</div>
          <img [src]="song.trackUrl || 'assets/default-cover.jpg'" alt="{{ song.track }}" class="card-image" />
          <div class="card-content">
            <h3>{{ song.track }}</h3>
            <p>{{ song.artist }}</p>
            <p>{{ song.album }}</p>
            <p>{{song.count}} écoutes</p>
          </div>
        </div>
      </div>
    </div>
  </section>

</div>