<div class="dashboard-container login-page">
  <section class="section">
    <h2>
      <i class="fas" [ngClass]="isSignUp ? 'fa-user-plus' : 'fa-sign-in-alt'"></i> 
      {{ isSignUp ? 'Créer un compte' : 'Connexion' }}
    </h2>

    <form (ngSubmit)="handleAuth()" #authForm="ngForm" class="login-form" novalidate>
      
      <div class="form-group">
        <label for="email">Email</label>
        <input
          id="email"
          name="email"
          type="email"
          [(ngModel)]="email"
          #emailModel="ngModel"
          required
          email
          autocomplete="email"
          placeholder="votre@email.com"
          [class.invalid]="authForm.submitted && emailModel.invalid"
        >
        <div *ngIf="authForm.submitted && emailModel.errors" class="validation-error">
          <small *ngIf="emailModel.errors['required']">Email requis</small>
          <small *ngIf="emailModel.errors['email']">Format email invalide</small>
        </div>
      </div>

      <div class="form-group">
        <label for="password">Mot de passe</label>
        <input
          id="password"
          name="password"
          type="password"
          [(ngModel)]="password"
          #passwordModel="ngModel"
          required
          minlength="6"
          autocomplete="{{ isSignUp ? 'new-password' : 'current-password' }}"
          placeholder="••••••"
          [class.invalid]="authForm.submitted && passwordModel.invalid"
        >
        <div *ngIf="authForm.submitted && passwordModel.errors" class="validation-error">
          <small *ngIf="passwordModel.errors['required']">Mot de passe requis</small>
          <small *ngIf="passwordModel.errors['minlength']">6 caractères minimum</small>
        </div>
      </div>

      <div *ngIf="errorMessage" class="error-message" role="alert">
        <i class="fas fa-exclamation-circle"></i> {{ errorMessage }}
      </div>

      <div *ngIf="successMessage" class="success-message" role="status">
        <i class="fas fa-check-circle"></i> {{ successMessage }}
      </div>

      <button type="submit" [disabled]="isLoading" class="submit-btn">
        <ng-container *ngIf="!isLoading">
          {{ isSignUp ? 'Créer le compte' : 'Se connecter' }}
        </ng-container>
        
        <ng-container *ngIf="isLoading">
          <span class="spinner" aria-hidden="true"></span> 
          <span>{{ isSignUp ? 'Création...' : 'Connexion...' }}</span>
        </ng-container>
      </button>

      <div class="footer-links">
        <button type="button" class="link-btn" (click)="toggleAuthMode()">
          {{ isSignUp ? 'Déjà un compte ? Se connecter' : 'Pas encore de compte ? Créer un compte' }}
        </button>
      </div>
    </form>
  </section>
</div>